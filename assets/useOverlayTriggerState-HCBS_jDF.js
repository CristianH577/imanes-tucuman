import{P as E,r as u,N as h,at as S,bF as x}from"./index-Coj7M6mq.js";import{b as w,e as C}from"./FocusScope-BXXocTO-.js";import{a as L}from"./useControlledState-DCasMgxo.js";const I=Symbol.for("react-aria.i18n.locale"),k=Symbol.for("react-aria.i18n.strings");let b;class p{getStringForLocale(e,t){let a=this.getStringsForLocale(t)[e];if(!a)throw new Error(`Could not find intl message ${e} in ${t} locale`);return a}getStringsForLocale(e){let t=this.strings[e];return t||(t=F(e,this.strings,this.defaultLocale),this.strings[e]=t),t}static getGlobalDictionaryForPackage(e){if(typeof window>"u")return null;let t=window[I];if(b===void 0){let a=window[k];if(!a)return null;b={};for(let i in a)b[i]=new p({[t]:a[i]},t)}let r=b==null?void 0:b[e];if(!r)throw new Error(`Strings for package "${e}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return r}constructor(e,t="en-US"){this.strings=Object.fromEntries(Object.entries(e).filter(([,r])=>r)),this.defaultLocale=t}}function F(n,e,t="en-US"){if(e[n])return e[n];let r=M(n);if(e[r])return e[r];for(let a in e)if(a.startsWith(r+"-"))return e[a];return e[t]}function M(n){return Intl.Locale?new Intl.Locale(n).language:n.split("-")[0]}const y=new Map,v=new Map;class R{format(e,t){let r=this.strings.getStringForLocale(e,this.locale);return typeof r=="function"?r(t,this):r}plural(e,t,r="cardinal"){let a=t["="+e];if(a)return typeof a=="function"?a():a;let i=this.locale+":"+r,s=y.get(i);s||(s=new Intl.PluralRules(this.locale,{type:r}),y.set(i,s));let l=s.select(e);return a=t[l]||t.other,typeof a=="function"?a():a}number(e){let t=v.get(this.locale);return t||(t=new Intl.NumberFormat(this.locale),v.set(this.locale,t)),t.format(e)}select(e,t){let r=e[t]||e.other;return typeof r=="function"?r():r}constructor(e,t){this.locale=e,this.strings=t}}const D=new WeakMap;function W(n){let e=D.get(n);return e||(e=new p(n),D.set(n,e)),e}function K(n,e){return e&&p.getGlobalDictionaryForPackage(e)||W(n)}function U(n,e){let{locale:t}=E(),r=K(n,e);return u.useMemo(()=>new R(t,r),[t,r])}function z(n,e){let t=n;for(w(t,e)&&(t=t.parentElement);t&&!w(t,e);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}function T(n){let{ref:e,onInteractOutside:t,isDisabled:r,onInteractOutsideStart:a}=n,i=u.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),s=h(c=>{t&&O(c,e)&&(a&&a(c),i.current.isPointerDown=!0)}),l=h(c=>{t&&t(c)});u.useEffect(()=>{let c=i.current;if(r)return;const m=e.current,d=S(m);if(typeof PointerEvent<"u"){let $=g=>{c.isPointerDown&&O(g,e)&&l(g),c.isPointerDown=!1};return d.addEventListener("pointerdown",s,!0),d.addEventListener("click",$,!0),()=>{d.removeEventListener("pointerdown",s,!0),d.removeEventListener("click",$,!0)}}},[e,r,s,l])}function O(n,e){if(n.button>0)return!1;if(n.target){const t=n.target.ownerDocument;if(!t||!t.documentElement.contains(n.target)||n.target.closest("[data-react-aria-top-layer]"))return!1}return e.current?!n.composedPath().includes(e.current):!1}const f=[];function H(n,e){let{onClose:t,shouldCloseOnBlur:r,isOpen:a,isDismissable:i=!1,isKeyboardDismissDisabled:s=!1,shouldCloseOnInteractOutside:l}=n;u.useEffect(()=>{if(a&&!f.includes(e))return f.push(e),()=>{let o=f.indexOf(e);o>=0&&f.splice(o,1)}},[a,e]);let c=()=>{f[f.length-1]===e&&t&&t()},m=o=>{(!l||l(o.target))&&f[f.length-1]===e&&(o.stopPropagation(),o.preventDefault())},d=o=>{(!l||l(o.target))&&(f[f.length-1]===e&&(o.stopPropagation(),o.preventDefault()),c())},$=o=>{o.key==="Escape"&&!s&&!o.nativeEvent.isComposing&&(o.stopPropagation(),o.preventDefault(),c())};T({ref:e,onInteractOutside:i&&a?d:void 0,onInteractOutsideStart:m});let{focusWithinProps:g}=x({isDisabled:!r,onBlurWithin:o=>{!o.relatedTarget||C(o.relatedTarget)||(!l||l(o.relatedTarget))&&(t==null||t())}}),P=o=>{o.target===o.currentTarget&&o.preventDefault()};return{overlayProps:{onKeyDown:$,...g},underlayProps:{onPointerDown:P}}}function N(n){let[e,t]=L(n.isOpen,n.defaultOpen||!1,n.onOpenChange);const r=u.useCallback(()=>{t(!0)},[t]),a=u.useCallback(()=>{t(!1)},[t]),i=u.useCallback(()=>{t(!e)},[t,e]);return{isOpen:e,setOpen:t,open:r,close:a,toggle:i}}export{U as $,z as a,N as b,H as c};
