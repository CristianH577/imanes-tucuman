const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DrawerFilters-rK4BClyf.js","assets/index-B_8SBfU6.js","assets/index-aIEKSM9s.css","assets/values-DqSe3AG-.js","assets/svgsFormas-Mel_dMbs.js","assets/ArrowBack-BwzhMZdR.js","assets/MenuItem-C1SJcMOD.js","assets/Paper-CySMbH20.js","assets/ownerWindow-4oMaUXQB.js","assets/OutlinedInput--qRKzRYL.js","assets/Modal-zePM4R76.js","assets/Close-C4DaYNum.js","assets/IconButton-B4H1Aoch.js","assets/Select-BGtkwffr.js","assets/Typography-fYRRi7TI.js","assets/SwitchBase-RdbkJBY1.js"])))=>i.map(i=>d[i]);
import{u as T,j as s,C as H,m as P,I as z,f as W,r as f,c as R,g as q,h as G,s as U,i as Z,B as D,k as $,e as K,l as Q,n as X,t as A,o as Y,p as V,q as ee,_ as se}from"./index-B_8SBfU6.js";import{O as te,F}from"./values-DqSe3AG-.js";import{B as ae}from"./ButtonAddCart-DNW7eTMF.js";import{P as ie}from"./PriceLabel-DFizLVoG.js";import{S as ne}from"./StoreOnlineButtons-Bj8vNk57.js";import{I as re}from"./InputSearch-Bv-pRRQW.js";import"./svgsFormas-Mel_dMbs.js";import"./ShoppingCart-CKprS14H.js";import"./OutlinedInput--qRKzRYL.js";import"./ownerWindow-4oMaUXQB.js";const le={hidden:{opacity:0,scale:0},visible:{opacity:1,scale:1},hover:{scale:1.05}};function oe({items:m=[],loading:g=!1,databaseImgs:r={}}){const x=T(),n=x.cart.value;return g?s.jsx("div",{className:"flex justify-center",children:s.jsx(H,{})}):m.length<1?s.jsx("div",{className:"flex justify-center",children:s.jsx("span",{className:"font-semibold text-xl",children:"Sin resultados"})}):s.jsx("section",{className:"w-full grid grid-cols-[repeat(auto-fit,_minmax(150px,_180px))] gap-4 lg:gap-6 justify-center",children:m.map(e=>{const j=r[e.id];let b=!1;if(j.haveSvg&&e.forma){const u=te[e.forma[0]];if(u&&u.icon&&(b=u.icon),e.forma[1]&&u.subs&&e.forma[1]in u.subs){const v=u.subs[e.forma[1]];v.icon&&(b=v.icon)}}return s.jsxs(P.article,{variants:le,initial:"hidden",animate:"visible",whileHover:"hover",className:"bg-content1 rounded-lg shadow-md flex flex-col pb-2",children:[s.jsxs("a",{href:`#buscar/${e.id}`,title:e.label,className:"flex flex-col h-full",children:[s.jsx("div",{className:"h-[150px] shadow-small rounded-lg p-2 flex items-center justify-center",children:b?s.jsx(b,{className:"h-full w-full max-w-[150px]"}):s.jsx(z,{alt:`Imagen de ${e.label}`,className:"object-contain w-full h-full",classes:{wrapper:"h-full max-w-[150px]"},src:j.preview})}),s.jsxs("div",{className:"p-2 flex-1 flex flex-col justify-between",children:[s.jsxs("p",{children:[s.jsxs("span",{className:"text-second self-start text-neutral-400 capitalize line-clamp-1",children:[e.categorie[0]," ",e.categorie[1]?" > "+e.categorie[1]:""]}),s.jsx("b",{className:"line-clamp-2 text-start",children:e.label}),e!=null&&e.noStock?s.jsx("b",{className:"text-danger",children:"Sin Stock"}):null]}),s.jsx(ie,{itemData:e,className:"self-end",classNames:{price:"font-semibold text-tert text-custom2-10 dark:text-custom1"}})]})]}),s.jsx(W,{variant:"middle",className:"mb-2 bg-neutral-500/50"}),s.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[e.links&&s.jsx(ne,{links:e.links}),s.jsx(ae,{inCart:e.id in n,handleAdd:()=>{let u=1;e.id in n&&(u=0),x.cart.add(e.id,u)},className:"self-center"})]})]},e.id)})})}const ce=s.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 256 256",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M230,184a6,6,0,0,1-12,0A90,90,0,0,0,64.36,120.36L38.55,146H88a6,6,0,0,1,0,12H24a6,6,0,0,1-6-6V88a6,6,0,0,1,12,0v49.58l25.89-25.72A102,102,0,0,1,230,184Z"})}),de=s.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 256 256",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M238,88v64a6,6,0,0,1-6,6H168a6,6,0,0,1,0-12h49.45l-25.8-25.63A90,90,0,0,0,38,184a6,6,0,0,1-12,0,102,102,0,0,1,174.12-72.12L226,137.58V88a6,6,0,0,1,12,0Z"})});function pe({totalItems:m=0,itemsPerPage:g=10,currentPage:r=1,className:x="",classes:n={},setPage:e=()=>{},iconNext:j=">",iconPrev:b="<",iconLast:u=">>",iconFirst:v="<<",showJumps:_=!1,siblings:N=1,showElipsis:S=!1,iconElipsisInf:I="...",iconElipsisHoverInf:C=ce,iconElipsisSup:O="...",iconElipsisHoverSup:L=de,breakpoints:k}){const E={showElipsis:S,siblings:N,showJumps:_},[t,c]=f.useState(E),i=Math.ceil(m/g),a=r-t.siblings<1?1:r+t.siblings>i?i-t.siblings*2:r-t.siblings,l=r+t.siblings>i?i:r-t.siblings<1?1+t.siblings*2:r+t.siblings,o="select-none flex flex-wrap items-center justify-center shadow-md min-w-9 w-9 h-9 text-small rounded-md"+(n.li?" "+n.li:""),d={wrapper:"pagination-custom p-2"+(x?" "+x:""),list:"flex flex-wrap gap-1 justify-center"+(n.list?" "+n.list:""),prev:o+(n.prev?" "+n.prev:""),first:o+" data-[hidden=true]:hidden"+(n.first?" "+n.first:""),item:o+" max-[230px]:data-[active=false]:hidden data-[active=false]:data-[hidden=true]:hidden"+(n.item?" "+n.item:""),last:o+" data-[hidden=true]:hidden "+(n.last?" "+n.last:""),next:o+(n.next?" "+n.next:""),elipsisInf:o+" data-[hidden=true]:hidden group"+(n.elipsisInf?" "+n.elipsisInf:""),elipsisSup:o+" data-[hidden=true]:hidden group"+(n.elipsisSup?" "+n.elipsisSup:"")},w={prev:()=>e(r-1),first:()=>e(1),last:()=>e(i),next:()=>e(r+1),elipsisInf:()=>{let p=r-t.siblings*2;p<1&&(p=1),t.siblings===0&&(p=r-1),e(p)},elipsisSup:()=>{var p=r+t.siblings*2;p>i&&(p=i),t.siblings===0&&(p=r+1),e(p)}};return f.useEffect(()=>{if(k){const p=()=>{const y=window.innerWidth,h=structuredClone(E);Object.entries(k).forEach(([M,J])=>{Number(M)<=y&&Object.assign(h,J)}),c(h)};return p(),window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}}},[]),s.jsx("nav",{"data-slot":"wrapper",role:"navigation","aria-label":"pagination navigation",className:d.wrapper,children:s.jsxs("ul",{"data-slot":"list",className:d.list,children:[s.jsx("li",{"data-slot":"prev",role:"button","aria-label":"previous page button",title:"Página anterior",className:d.prev,"data-disabled":r<=1,onClick:w.prev,children:b}),s.jsx("li",{"data-slot":"first",role:"button","aria-label":"first page button",title:"Primera página","data-hidden":t.showJumps?a<=1:!0,className:d.first,onClick:w.first,children:v}),s.jsxs("li",{"data-slot":"elipsisInf",role:"button","aria-label":"elipsis inferior button",title:"Saltar "+t.siblings*2+" páginas atrás","data-hidden":t.showElipsis?a<=1:!0,className:d.elipsisInf,onClick:w.elipsisInf,children:[s.jsx("span",{className:"group-hover:hidden",children:I}),s.jsx("span",{className:"hidden group-hover:block",children:C})]}),[...Array(i)].map((p,y)=>{const h=y+1;return s.jsx("li",{"data-slot":"item",role:"button","aria-label":"pagination item "+h,title:"Página "+h,"data-active":r===h,"data-hidden":h<a||h>l,className:d.item,onClick:()=>e(h),children:h},h)}),s.jsxs("li",{"data-slot":"elipsisSup",role:"button","aria-label":"elipsis superior button",title:"Saltar "+t.siblings*2+" páginas adelante","data-hidden":t.showElipsis?l===i:!0,className:d.elipsisSup,onClick:w.elipsisSup,children:[s.jsx("span",{className:"group-hover:hidden",children:O}),s.jsx("span",{className:"hidden group-hover:block",children:L})]}),s.jsx("li",{"data-slot":"last",role:"button","aria-label":"last page button",title:"Última página","data-hidden":t.showJumps?l>=i:!0,className:d.last,onClick:w.last,children:u}),s.jsx("li",{"data-slot":"next",role:"button","aria-label":"next page button",title:"Página siguiente","data-disabled":r>=i,className:d.next,onClick:w.next,children:j})]})})}const ue=R(s.jsx("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"})),he=f.lazy(()=>se(()=>import("./DrawerFilters-rK4BClyf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),B=16;function _e(){const{search:m}=q(),g=G(),r=T(),[x,n]=f.useState([]),[e,j]=f.useState(F),[b,u]=f.useState([]),[v,_]=f.useState(!0),[N,S]=f.useState(""),[I,C]=f.useState(!1),O=async()=>{Q(),_(!0);let t=[];if(t=X.filter(a=>!(a!=null&&a.hidden)),t=JSON.parse(JSON.stringify(t)),e.categorie.length>0&&e.categorie.forEach((a,l)=>{t=t.filter(o=>a.includes("other")&&!o.categorie[l]?!0:o.categorie.includes(a))}),e.forma.length>0&&e.forma.forEach(a=>{t=t.filter(l=>{var o;return(o=l.forma)==null?void 0:o.includes(a)})}),e!=null&&e.priceMin){const a=Number(e==null?void 0:e.priceMin);t=t.filter(l=>{const o=l.priceData.usePrice,d=l.priceData.prices[o];return Number(d)>=a})}if(e!=null&&e.priceMax){const a=Number(e==null?void 0:e.priceMax);t=t.filter(l=>{const o=l.priceData.usePrice,d=l.priceData.prices[o];return Number(d)<=a})}if(e!=null&&e.text){const a=A(e.text);t=t.filter(l=>{if(A(JSON.stringify(l)).includes(a))return l})}if(e!=null&&e.stock&&(t=t.filter(a=>!(a!=null&&a.noStock))),e!=null&&e.discount&&(t=t.filter(a=>{var l;return(l=a==null?void 0:a.priceData.prices)==null?void 0:l.discount})),e!=null&&e.orderBy){const[a,l]=e.orderBy.split("-");t.sort(Y(a,l))}const c=t.slice(B*(e.page-1),B*e.page),i=await V(c,r.db.value);r.db.set(i),n(t),u(c),_(!1)},L=()=>{let t="?orderBy=price-asc";N&&(t+="&text="+N),g(t)},k=()=>S(""),E=t=>{let c=ee(e);c?c+="&":c+="?",c+="page="+t,g(c)};return f.useEffect(()=>{const t=structuredClone(F);if(m){const c=U(m);Object.keys(c).forEach(i=>{if(t.hasOwnProperty(i)){switch(i){case"page":t[i]=Number(c[i]);break;case"forma":case"categorie":t[i]=c[i].split(",");break;case"stock":case"discount":t[i]=!!c[i];break;default:t[i]=c[i];break}t.apply=!0}})}S(t==null?void 0:t.text),j(t)},[m]),f.useEffect(()=>{O()},[e]),s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"flex flex-col items-center gap-2",children:[s.jsxs("article",{className:"flex flex-col gap-2 items-center",children:[s.jsx(re,{value:N,className:"sm:hidden",setValue:S,handleSearch:L}),s.jsxs(Z,{variant:"contained",sx:{"& .MuiButton-root":{textTransform:"none",fontFamily:"unset",fontWeight:"bold"}},children:[s.jsx(D,{component:"a",title:"Limpiar filtros",color:"inherit",href:"#buscar?orderBy=price-asc",className:"font-bold",startIcon:s.jsx($,{className:"h-6 w-fit"}),onClick:k,children:"Limpiar"}),s.jsx(D,{color:e!=null&&e.apply?"warning":"inherit",title:"Abrir lista de filtros",className:"font-bold",startIcon:s.jsx(ue,{className:"h-6 w-fit"}),onClick:()=>C(!0),children:"Filtros"})]})]}),s.jsxs("article",{className:"text-center text-neutral-400 font-semibold",children:[e.text&&s.jsxs("p",{className:"max-sm:hidden",children:['Buscando: "',e.text,'"']}),s.jsxs("p",{children:["Total: ",x.length,s.jsx("br",{}),s.jsxs("span",{className:"text-second",children:["Presione en las tarjetas para ver el articulo.",s.jsx("br",{}),"Los precios pueden variar."]})]})]})]}),s.jsx(oe,{items:b,loading:v,databaseImgs:r.db.value}),x.length>B&&s.jsx(pe,{totalItems:x.length,currentPage:e.page,itemsPerPage:B,setPage:E,showJumps:!0,siblings:1,className:"mt-4",classes:{li:"bg-custom1-3 text-custom2 font-semibold data-[disabled=true]:text-neutral-500 data-[disabled=true]:bg-neutral-300/60 data-[active=true]:bg-custom2-10 data-[active=true]:text-custom1-3 hover:bg-custom2-10 hover:text-custom1-3"},breakpoints:{240:{showElipsis:!0},320:{showJumps:!0},400:{siblings:1},500:{siblings:2},600:{siblings:3},700:{siblings:4},800:{siblings:5}}}),I&&s.jsx(K,{classFall:"absolute w-screen min-h-screen top-0 bg-black/50 z-30",children:s.jsx(he,{isOpen:I,setIsOpen:C,filtersValues:e})})]})}export{_e as default};
