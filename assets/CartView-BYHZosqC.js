import{c as Y,j as c,u as he,r as v,C as ge,m as re,e as J,E as De,w as T,n as pe,p as $e,v as K,I as _e,o as Le,G as Ie,H as Te,J as Fe,K as ke,g as Ae,l as Ve,W as Me,x as Ne}from"./index-cr0xH0OP.js";import{s as Oe,l as He}from"./chunk-2GIFKCNQ-jKRqwkya.js";import{O as Ue}from"./values-BzqSpjUO.js";import{s as ze}from"./tvs-BJd3oYTX.js";import{i as qe}from"./chunk-6MDMHKHV-CoWhl9Ks.js";import{P as We}from"./PriceLabel-dydLIwSe.js";import{P as Be}from"./Payments-CLhuifR5.js";import"./chunk-SLABUSGS-DIBEcJFZ.js";import"./useDialog-Dmncx4Sn.js";import"./svgsFormas-CrVzArn1.js";function Ge(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),s=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(s),r.body.appendChild(a),t&&(s.href=t),a.href=e,a.href}const Qe=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function R(e){const t=[];for(let r=0,s=e.length;r<s;r++)t.push(e[r]);return t}let L=null;function xe(e={}){return L||(e.includeStyleProperties?(L=e.includeStyleProperties,L):(L=R(window.getComputedStyle(document.documentElement)),L))}function H(e,t){const s=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return s?parseFloat(s.replace("px","")):0}function Je(e){const t=H(e,"border-left-width"),r=H(e,"border-right-width");return e.clientWidth+t+r}function Ke(e){const t=H(e,"border-top-width"),r=H(e,"border-bottom-width");return e.clientHeight+t+r}function be(e,t={}){const r=t.width||Je(e),s=t.height||Ke(e);return{width:r,height:s}}function Xe(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const y=16384;function Ye(e){(e.width>y||e.height>y)&&(e.width>y&&e.height>y?e.width>e.height?(e.height*=y/e.width,e.width=y):(e.width*=y/e.height,e.height=y):e.width>y?(e.height*=y/e.width,e.width=y):(e.width*=y/e.height,e.height=y))}function U(e){return new Promise((t,r)=>{const s=new Image;s.onload=()=>{s.decode().then(()=>{requestAnimationFrame(()=>t(s))})},s.onerror=r,s.crossOrigin="anonymous",s.decoding="async",s.src=e})}async function Ze(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function et(e,t,r){const s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"svg"),n=document.createElementNS(s,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("externalResourcesRequired","true"),a.appendChild(n),n.appendChild(e),Ze(a)}const x=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||x(r,t)};function tt(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function st(e,t){return xe(t).map(r=>{const s=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${s}${a?" !important":""};`}).join(" ")}function rt(e,t,r,s){const a=`.${e}:${t}`,n=r.cssText?tt(r):st(r,s);return document.createTextNode(`${a}{${n}}`)}function ne(e,t,r,s){const a=window.getComputedStyle(e,r),n=a.getPropertyValue("content");if(n===""||n==="none")return;const i=Qe();try{t.className=`${t.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(rt(i,r,a,s)),t.appendChild(o)}function nt(e,t,r){ne(e,t,":before",r),ne(e,t,":after",r)}const ae="application/font-woff",ie="image/jpeg",at={woff:ae,woff2:ae,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ie,jpeg:ie,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function it(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function Z(e){const t=it(e).toLowerCase();return at[t]||""}function ct(e){return e.split(/,/)[1]}function X(e){return e.search(/^(data:)/)!==-1}function ot(e,t){return`data:${t};base64,${e}`}async function ye(e,t,r){const s=await fetch(e,t);if(s.status===404)throw new Error(`Resource "${s.url}" not found`);const a=await s.blob();return new Promise((n,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{n(r({res:s,result:o.result}))}catch(d){i(d)}},o.readAsDataURL(a)})}const Q={};function lt(e,t,r){let s=e.replace(/\?.*/,"");return r&&(s=e),/ttf|otf|eot|woff2?/i.test(s)&&(s=s.replace(/.*\//,"")),t?`[${t}]${s}`:s}async function ee(e,t,r){const s=lt(e,t,r.includeQueryParams);if(Q[s]!=null)return Q[s];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const n=await ye(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),ct(o)));a=ot(n,t)}catch(n){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;n&&(i=typeof n=="string"?n:n.message),i&&console.warn(i)}return Q[s]=a,a}async function ut(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):U(t)}async function dt(e,t){if(e.currentSrc){const n=document.createElement("canvas"),i=n.getContext("2d");n.width=e.clientWidth,n.height=e.clientHeight,i==null||i.drawImage(e,0,0,n.width,n.height);const o=n.toDataURL();return U(o)}const r=e.poster,s=Z(r),a=await ee(r,s,t);return U(a)}async function mt(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await z(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function ft(e,t){return x(e,HTMLCanvasElement)?ut(e):x(e,HTMLVideoElement)?dt(e,t):x(e,HTMLIFrameElement)?mt(e,t):e.cloneNode(we(e))}const ht=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",we=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function gt(e,t,r){var s,a;if(we(t))return t;let n=[];return ht(e)&&e.assignedNodes?n=R(e.assignedNodes()):x(e,HTMLIFrameElement)&&(!((s=e.contentDocument)===null||s===void 0)&&s.body)?n=R(e.contentDocument.body.childNodes):n=R(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),n.length===0||x(e,HTMLVideoElement)||await n.reduce((i,o)=>i.then(()=>z(o,r)).then(d=>{d&&t.appendChild(d)}),Promise.resolve()),t}function pt(e,t,r){const s=t.style;if(!s)return;const a=window.getComputedStyle(e);a.cssText?(s.cssText=a.cssText,s.transformOrigin=a.transformOrigin):xe(r).forEach(n=>{let i=a.getPropertyValue(n);n==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),x(e,HTMLIFrameElement)&&n==="display"&&i==="inline"&&(i="block"),n==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),s.setProperty(n,i,a.getPropertyPriority(n))})}function xt(e,t){x(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),x(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function bt(e,t){if(x(e,HTMLSelectElement)){const r=t,s=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));s&&s.setAttribute("selected","")}}function yt(e,t,r){return x(t,Element)&&(pt(e,t,r),nt(e,t,r),xt(e,t),bt(e,t)),t}async function wt(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const s={};for(let n=0;n<r.length;n++){const o=r[n].getAttribute("xlink:href");if(o){const d=e.querySelector(o),b=document.querySelector(o);!d&&b&&!s[o]&&(s[o]=await z(b,t,!0))}}const a=Object.values(s);if(a.length){const n="http://www.w3.org/1999/xhtml",i=document.createElementNS(n,"svg");i.setAttribute("xmlns",n),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(n,"defs");i.appendChild(o);for(let d=0;d<a.length;d++)o.appendChild(a[d]);e.appendChild(i)}return e}async function z(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(s=>ft(s,t)).then(s=>gt(e,s,t)).then(s=>yt(e,s,t)).then(s=>wt(s,t))}const Se=/url\((['"]?)([^'"]+?)\1\)/g,St=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,vt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Et(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Ct(e){const t=[];return e.replace(Se,(r,s,a)=>(t.push(a),r)),t.filter(r=>!X(r))}async function jt(e,t,r,s,a){try{const n=r?Ge(t,r):t,i=Z(t);let o;return a||(o=await ee(n,i,s)),e.replace(Et(t),`$1${o}$3`)}catch{}return e}function Pt(e,{preferredFontFormat:t}){return t?e.replace(vt,r=>{for(;;){const[s,,a]=St.exec(r)||[];if(!a)return"";if(a===t)return`src: ${s};`}}):e}function ve(e){return e.search(Se)!==-1}async function Ee(e,t,r){if(!ve(e))return e;const s=Pt(e,r);return Ct(s).reduce((n,i)=>n.then(o=>jt(o,i,t,r)),Promise.resolve(s))}async function I(e,t,r){var s;const a=(s=t.style)===null||s===void 0?void 0:s.getPropertyValue(e);if(a){const n=await Ee(a,null,r);return t.style.setProperty(e,n,t.style.getPropertyPriority(e)),!0}return!1}async function Rt(e,t){await I("background",e,t)||await I("background-image",e,t),await I("mask",e,t)||await I("-webkit-mask",e,t)||await I("mask-image",e,t)||await I("-webkit-mask-image",e,t)}async function Dt(e,t){const r=x(e,HTMLImageElement);if(!(r&&!X(e.src))&&!(x(e,SVGImageElement)&&!X(e.href.baseVal)))return;const s=r?e.src:e.href.baseVal,a=await ee(s,Z(s),t);await new Promise((n,i)=>{e.onload=n,e.onerror=t.onImageErrorHandler?(...d)=>{try{n(t.onImageErrorHandler(...d))}catch(b){i(b)}}:i;const o=e;o.decode&&(o.decode=n),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function $t(e,t){const s=R(e.childNodes).map(a=>Ce(a,t));await Promise.all(s).then(()=>e)}async function Ce(e,t){x(e,Element)&&(await Rt(e,t),await Dt(e,t),await $t(e,t))}function _t(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const s=t.style;return s!=null&&Object.keys(s).forEach(a=>{r[a]=s[a]}),e}const ce={};async function oe(e){let t=ce[e];if(t!=null)return t;const s=await(await fetch(e)).text();return t={url:e,cssText:s},ce[e]=t,t}async function le(e,t){let r=e.cssText;const s=/url\(["']?([^"')]+)["']?\)/g,n=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(s,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),ye(o,t.fetchRequestInit,({result:d})=>(r=r.replace(i,`url(${d})`),[i,d]))});return Promise.all(n).then(()=>r)}function ue(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let s=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const d=a.exec(s);if(d===null)break;t.push(d[0])}s=s.replace(a,"");const n=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let d=n.exec(s);if(d===null){if(d=o.exec(s),d===null)break;n.lastIndex=o.lastIndex}else o.lastIndex=n.lastIndex;t.push(d[0])}return t}async function Lt(e,t){const r=[],s=[];return e.forEach(a=>{if("cssRules"in a)try{R(a.cssRules||[]).forEach((n,i)=>{if(n.type===CSSRule.IMPORT_RULE){let o=i+1;const d=n.href,b=oe(d).then(m=>le(m,t)).then(m=>ue(m).forEach(p=>{try{a.insertRule(p,p.startsWith("@import")?o+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:p,error:h})}})).catch(m=>{console.error("Error loading remote css",m.toString())});s.push(b)}})}catch(n){const i=e.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&s.push(oe(a.href).then(o=>le(o,t)).then(o=>ue(o).forEach(d=>{i.insertRule(d,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",n)}}),Promise.all(s).then(()=>(e.forEach(a=>{if("cssRules"in a)try{R(a.cssRules||[]).forEach(n=>{r.push(n)})}catch(n){console.error(`Error while reading CSS rules from ${a.href}`,n)}}),r))}function It(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>ve(t.style.getPropertyValue("src")))}async function Tt(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=R(e.ownerDocument.styleSheets),s=await Lt(r,t);return It(s)}function je(e){return e.trim().replace(/["']/g,"")}function Ft(e){const t=new Set;function r(s){(s.style.fontFamily||getComputedStyle(s).fontFamily).split(",").forEach(n=>{t.add(je(n))}),Array.from(s.children).forEach(n=>{n instanceof HTMLElement&&r(n)})}return r(e),t}async function kt(e,t){const r=await Tt(e,t),s=Ft(e);return(await Promise.all(r.filter(n=>s.has(je(n.style.fontFamily))).map(n=>{const i=n.parentStyleSheet?n.parentStyleSheet.href:null;return Ee(n.cssText,i,t)}))).join(`
`)}async function At(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await kt(e,t);if(r){const s=document.createElement("style"),a=document.createTextNode(r);s.appendChild(a),e.firstChild?e.insertBefore(s,e.firstChild):e.appendChild(s)}}async function Vt(e,t={}){const{width:r,height:s}=be(e,t),a=await z(e,t,!0);return await At(a,t),await Ce(a,t),_t(a,t),await et(a,r,s)}async function Mt(e,t={}){const{width:r,height:s}=be(e,t),a=await Vt(e,t),n=await U(a),i=document.createElement("canvas"),o=i.getContext("2d"),d=t.pixelRatio||Xe(),b=t.canvasWidth||r,m=t.canvasHeight||s;return i.width=b*d,i.height=m*d,t.skipAutoScale||Ye(i),i.style.width=`${b}`,i.style.height=`${m}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(n,0,0,i.width,i.height),i}async function Nt(e,t={}){return(await Mt(e,t)).toDataURL()}const Ot=Y(c.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),de=[{id:"img",label:"",disabledSort:!0},{id:"label",label:"Nombre"},{id:"qtt",label:"Cantidad",isNumeric:!0,disabledSort:!0},{id:"price",label:"Precio",isNumeric:!0},{id:"subtotal",label:"Subtotal",isNumeric:!0,disabledSort:!0}],me={total:0,base:0,percentage:0},fe=10;function Ht({downloading:e=!1,following:t=!1}){const r=he(),s=r.cart.value,[a,n]=v.useState(!0),[i,o]=v.useState([]),[d,b]=v.useState("price-asc"),[m,p]=v.useState(fe),[h,D]=v.useState({...me}),E=i.slice(0,m),[C,q]=v.useState(structuredClone(s)),A=async()=>{n(!0);let l=pe.filter(f=>f.id in s);l=JSON.parse(JSON.stringify(l));const u=await $e(l,r.db.value,"thumbnails");r.db.set(u),l.map(f=>f.priceData=K(f.priceData,t&&f.categorie[0]==="imanes",s[f.id])),o(l),n(!1)},V=(l,u)=>{var P;const f=u[l],g=typeof f=="string"?f:"-";switch(l){case"label":return c.jsxs("div",{children:[c.jsx("a",{href:"#buscar/"+u.id,title:"Ver producto",className:"max-xs:whitespace-normal hover:underline",children:u.label}),c.jsx("p",{className:"capitalize text-second text-neutral-400",children:u.categorie.join(" > ")})]});case"img":const _=r.db.value[u.id];let O=!1;if(_.haveSvg&&u.forma){const S=Ue[u.forma[0]];if(S&&S.icon&&(O=S.icon),u.forma[1]&&S.subs&&u.forma[1]in S.subs){const se=S.subs[u.forma[1]];se.icon&&(O=se.icon)}}return O?c.jsx(O,{className:"w-[50px] h-fit max-h-[50px] self-center"}):c.jsx(_e,{alt:`Imagen de ${u.label}`,className:"object-contain w-[50px] min-w-[50px]",src:_.thumbnails&&_.thumbnails[0]});case"categorie":return c.jsx("span",{className:"capitalize",children:u.categorie.join(" > ")});case"qtt":const te=C[u.id];return c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(qe,{name:String(u.id),"aria-label":"Cantidad",type:"number",isInvalid:!1,size:"sm",className:"w-24",classNames:{inputWrapper:"border-b-2 border-custom1 bg-transparent rounded-none",input:"text-prima"},startContent:"x",endContent:((P=u==null?void 0:u.priceData)==null?void 0:P.salesUnit)||"u",min:0,value:te?String(te):"",onChange:S=>j(S,u.id),onBlur:S=>F(S,u.id),onKeyDown:S=>k(S,u.id)}),c.jsx(J,{isIconOnly:!0,size:"sm",color:"danger",variant:"ghost",className:`${e?" hidden":""}`,title:"Quitar del carrito",onPress:()=>W(u.id),children:c.jsx(Ot,{className:"h-5 w-fit"})})]});case"price":return c.jsx(We,{itemData:u});case"subtotal":const Pe=u.priceData.usePrice,Re=u.priceData.prices[Pe];return T(Number(Re)*s[u.id]);default:return g}},w=(l,u)=>{const f=i.find(g=>g.id===u);if(f){const g=Number(l.value),P=structuredClone(s);f.priceData=K(f.priceData,t&&f.categorie[0]==="imanes",g),r.cart.set({...P,[u]:g})}},j=(l,u)=>{const f=i.find(P=>P.id===u);let g=Number(l.target.value);f&&g>0&&g<1&&f.priceData.salesDecimal&&!f.priceData.salesDecimal.includes(g)&&(g=1),q({...s,[u]:g})},F=(l,u)=>{w(l.target,u)},k=(l,u)=>{if(l.key==="Enter"){const f=l.target;w(f,u)}},W=l=>{r.cart.add(l,0)},M=()=>{if(i.length>0){let l=structuredClone(me);i.forEach(u=>{const f=u.priceData.usePrice,g=u.priceData.prices[f],P=u.priceData.prices.base,_=s[u.id];l.total+=Number(g)*_,l.base+=P*_}),l.percentage=(l.base-l.total)/l.base,D(l)}},N=()=>{const l=m+fe;p(l)},B=l=>{var g;const u=((g=l.currentTarget.dataset)==null?void 0:g.column)||"price";let f="desc";d.includes("desc")&&(f="asc"),b(u+"-"+f)},G=()=>{if(d){const[l,u]=d.split("-"),f=i.sort(Le(l,u));o(f)}};return v.useEffect(()=>{A()},[s]),v.useEffect(()=>{M()},[i]),v.useEffect(G,[d]),v.useEffect(()=>{e&&p(i.length)},[e]),a?c.jsx(ge,{className:"place-self-center m-6"}):Object.keys(s).length<1?c.jsx("b",{className:"text-center text-xl p-4",children:"Sin artículos para mostrar."}):c.jsxs(c.Fragment,{children:[c.jsxs("span",{className:"text-neutral-400 text-start ps-2 font-semibold self-center",children:["Total de artículos: ",i.length]}),c.jsx(re.section,{variants:{hidden:{},visible:{transition:{delayChildren:.1,staggerChildren:.1}}},initial:"hidden",animate:"visible",className:`w-full sm:px-4 ${ze}`,style:{overflowX:e?"visible":"auto",maxWidth:e?"none":"90vw",paddingBottom:e?"0":"0.5rem"},children:c.jsxs("table",{className:"w-full sm:min-w-[640px]",children:[c.jsx("thead",{className:"border-b-3",children:c.jsx("tr",{children:de.map(l=>c.jsxs("th",{className:`p-2 whitespace-nowrap${l!=null&&l.disabledSort?"":" cursor-pointer hover:opacity-80"}`,style:{textAlign:l!=null&&l.isNumeric?"end":"start"},"data-column":l.id,onClick:l!=null&&l.disabledSort?void 0:B,children:[l.label,!(l!=null&&l.disabledSort)&&d.includes(l.id)?d.includes("desc")?" 🡡":" 🡣":null]},l.id))})}),c.jsxs("tbody",{children:[E.map(l=>c.jsx(re.tr,{variants:{hidden:{opacity:0,x:100},visible:{opacity:1,x:0}},className:"even:text-custom2-10 dark:even:text-custom1 group hover:bg-secondary/30",children:de.map(u=>c.jsx("td",{className:"px-3 py-2 sm:px-1 group-hover:font-semibold whitespace-nowrap",style:{textAlign:u!=null&&u.isNumeric?"end":"start"},children:V(u.id,l)},u.id+"-"+l.id))},l.id)),c.jsxs("tr",{children:[c.jsx("td",{children:m<i.length&&c.jsx(J,{className:"bg-custom1-2 text-custom2 font-bold hover:scale-105",title:"Mostrar mas",onPress:()=>N(),children:"Siguientes"})}),c.jsx("td",{colSpan:4})]})]})]})}),i.length>0&&c.jsxs("section",{className:"self-end font-semibold px-4 text-end border-3 border-customSwitch/80 rounded-md p-2",children:[(h==null?void 0:h.percentage)>0&&c.jsxs("div",{children:[c.jsxs("b",{className:"text-danger",children:["-",De(h==null?void 0:h.percentage)]})," ",c.jsx("span",{className:"text-neutral-400 line-through",children:T(h==null?void 0:h.base)})]}),c.jsxs("span",{className:"text-customSwitch",children:["Total ",T(h==null?void 0:h.total)]})]})]})}const Ut=Y(c.jsx("path",{d:"M4 10h3v7H4zm6.5 0h3v7h-3zM2 19h20v3H2zm15-9h3v7h-3zm-5-9L2 6v2h20V6z"})),$={retiro:{label:"Voy a retirar",description_item:"Quiero pasar a retirar",description_select:"Debe coordinar cuando quiera pasar."},coordinar:{label:"Quiero coordinar",description_item:"Quiero saber cuando se hagan entregas en el centro",description_select:""},cadete:{label:"Mando a buscarlo",description_item:"Quiero enviar a que lo busquen",description_select:"Si es un Uber, se transfiere el pago antes de entregar."},envio:{label:"Envío",description_item:"Quiero que me lo envíen",description_select:"Se transfiere el envío antes y se paga en la entrega."},envio_uber:{label:"Envío: Uber",description_item:"Quiero que me lo envíen por Uber",description_select:"Se transfiere el pago + envío antes."},envio_online:{label:"Envío: Tienda Online",description_item:"Quiero intermediar con Mercado Libre",description_select:"Puede comprar y arreglar por medio de ML(se pagan comisiones)."},envio_encomienda:{label:"Envío: Encomienda",description_item:"Quiero arreglar un envío por correo",description_select:""}};function zt({downloading:e=!1,entrega:t={value:"retiro",label:"",following:!1},setEntrega:r}){var s;return c.jsxs("div",{id:"presupuesto",className:`flex flex-col gap-4 ${e?"w-fit p-4":""}`,children:[c.jsx(Ie,{id:"presupuesto_logo",className:"max-w-44 my-2"}),c.jsx("section",{className:"flex flex-col items-center gap-2",children:c.jsx(Oe,{name:"shipping",size:"sm",label:"Entrega",className:"max-w-xs dark:text-white",classNames:{listbox:"dark:text-white",trigger:"border-2 border-customSwitch/80",popoverContent:"border-2 border-customSwitch/80",description:"text-neutral-400 !text-second"},selectedKeys:[t.value],onSelectionChange:a=>{var o;const n=a.currentKey||"retiro",i={...t};i.value=n,i.label=(o=$==null?void 0:$[n])==null?void 0:o.label,r(i)},description:(s=$==null?void 0:$[t.value])==null?void 0:s.description_select,children:Object.entries($).map(([a,n])=>c.jsx(He,{description:n==null?void 0:n.description_item,children:n==null?void 0:n.label},a))})}),c.jsx(Ht,{downloading:e,following:t.following}),c.jsxs("section",{className:"flex flex-col items-center gap-2 text-neutral-400 text-center",children:[c.jsxs("div",{className:"w-full flex flex-wrap items-center justify-center gap-3",children:[c.jsx(Be,{className:"h-6 w-fit"}),c.jsx(Ut,{className:"h-6 w-fit"}),c.jsx(Te,{className:"h-6 w-fit"}),c.jsx(Fe,{className:"h-6 w-fit"}),c.jsx(ke,{className:"h-5 w-fit"})]}),c.jsx(Ae,{className:"w-2/3 bg-neutral-500/50"}),c.jsx("p",{children:"Gracias por su compra."}),e&&c.jsx("p",{children:e})]})]})}const qt=Y([c.jsx("path",{d:"M18 2h-8L4 8v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 2v16H6V8.83L10.83 4z"},"0"),c.jsx("path",{d:"m16 13-4 4-4-4 1.41-1.41L11 13.17V9.02L13 9v4.17l1.59-1.59z"},"1")]);function ts(){const e=he(),t=e.cart.value,[r,s]=v.useState(!1),[a,n]=v.useState({value:"retiro",label:"Voy a retirar",following:!1}),i=()=>{var V;const m=[`Hola. Me interesa hacer este pedido:
`];m.push(`*${a.label}
`),a.following&&m.push(`*Sigo las redes.
`);let p=0,h=pe.filter(w=>w.id in t);h=JSON.parse(JSON.stringify(h)),h.forEach(w=>{const j=[],F=t[w.id]||0,k=K(w.priceData,a.following&&w.categorie[0]==="imanes",F),W=k.usePrice,M=k.prices[W]||0,N=M*F,B=w==null?void 0:w.label;p+=N,j.push(w.id+" -"),j.push(B+" =>"),j.push(T(M)),j.push(`x${F}${k.salesUnit||"u"}`),j.push(`= ${T(N)}`);const G=j.join(" ");m.push(G)});const D=T(p);m.push(`Total ${D}`);const E=m.join(`
`),C=encodeURIComponent(E),q=`${(V=e.links)==null?void 0:V.whatsapp}&text=${C}`,A=window.open(q,"_blank","noopener,noreferrer");A&&A.focus()},o=()=>{const m=new Date,p=m.getFullYear(),h=String(m.getMonth()+1).padStart(2,"0"),D=String(m.getDate()).padStart(2,"0"),E=String(m.getHours()).padStart(2,"0"),C=String(m.getMinutes()).padStart(2,"0");return`${p}/${h}/${D}-${E}:${C}`},b=[{label:"Limpiar",title:"Limpiar lista",icon:Ve,color:"default",onPress:()=>e.cart.set({})},{label:"Descargar",title:"Descargar como imagen",icon:qt,color:"secondary",onPress:async()=>{const m=document.querySelector("#presupuesto"),p=document.body.classList.contains("dark")?"black":"white";if(m){const h=o();s(!0);const D={backgroundColor:p,pixelRatio:2};setTimeout(async()=>{try{const E=await Nt(m,D),C=document.createElement("a");C.href=E,C.download=`presupuesto-imanes_tucuman-${h}.png`,C.click()}catch(E){console.error("Error al generar la imagen:",E)}s(!1)},200)}}},{label:"Continuar",title:"Continuar por WhatsApp",icon:Me,color:"success",onPress:i}];return c.jsxs(c.Fragment,{children:[c.jsxs("section",{className:"overflow-hidden max-xs:px-2 ",children:[c.jsx(zt,{downloading:r,entrega:a,setEntrega:n}),r&&c.jsx("span",{className:"bg-black/50 absolute inset-0 z-10 flex items-center justify-center",children:c.jsx(ge,{size:"lg",color:"secondary"})})]}),c.jsx("section",{className:"flex gap-2 max-xs:px-2 flex-wrap justify-center",children:b.map((m,p)=>{var h;return c.jsx(Ne,{title:m.title,arrow:!0,children:c.jsx("span",{children:c.jsx(J,{color:m.color,className:"p-2 max-xs:w-full font-semibold",isDisabled:((h=Object.keys(t))==null?void 0:h.length)<1||r,startContent:c.jsx(m.icon,{className:"h-full w-fit"}),onPress:(m==null?void 0:m.onPress)||null,children:m.label})})},p)})}),c.jsxs("section",{className:"text-center",children:[c.jsxs("p",{children:["Los pedidos de 500 o más unidades pueden conllevar una seña y/o costo de envío y tiempo de espera.",c.jsx("br",{}),"Cuanto termine de revisar la lista envié el pedido y será redirigido a whatsapp para continuar."]}),c.jsxs("p",{className:"font-size-secondary text-neutral-400 sm:hidden",children:[c.jsx("br",{}),"Si esta usando un dispositivo móvil y quiere descargar el pedido en una imagen es recomendable estar conectado a una red wifi dado que la imagen generada tendrá un peso considerable."]})]})]})}export{ts as default};
