import{r as y,az as _,N as D,bG as ue,bN as de,at as z,bO as ge,ar as be,bP as $e,bQ as me,aw as F,av as E,bR as Se,bS as Ke,aQ as Pe,y as he,bT as Te,bU as N,bV as xe,bW as Ee,bM as ee,bJ as we,C as Ie,aC as te,au as ke,a0 as U}from"./index-CBjmDVyM.js";import{b as Ce,c as Me}from"./FocusScope-DCfDB_eq.js";import{a as Ae}from"./useControlledState--BUp-ADM.js";function Ze(l,e){const t=y.useRef(!0),i=y.useRef(null);_(()=>(t.current=!0,()=>{t.current=!1}),[]),_(()=>{t.current?t.current=!1:(!i.current||e.some((s,c)=>!Object.is(s,i[c])))&&l(),i.current=e},e)}function Fe(l,e){const t=[];for(;l&&l!==document.documentElement;)Ce(l,e)&&t.push(l),l=l.parentElement;return t}function _e(l,e,t,i){let s=D(t),c=t==null;y.useEffect(()=>{if(c||!l.current)return;let n=l.current;return n.addEventListener(e,s,i),()=>{n.removeEventListener(e,s,i)}},[l,e,i,c,s])}function Le(l,e){let t=le(l,e,"left"),i=le(l,e,"top"),s=e.offsetWidth,c=e.offsetHeight,n=l.scrollLeft,u=l.scrollTop,{borderTopWidth:h,borderLeftWidth:b,scrollPaddingTop:T,scrollPaddingRight:m,scrollPaddingBottom:A,scrollPaddingLeft:w}=getComputedStyle(l),L=n+parseInt(b,10),I=u+parseInt(h,10),d=L+l.clientWidth,v=I+l.clientHeight,S=parseInt(T,10)||0,p=parseInt(A,10)||0,$=parseInt(m,10)||0,k=parseInt(w,10)||0;t<=n+k?n=t-parseInt(b,10)-k:t+s>d-$&&(n+=t+s-d+$),i<=I+S?u=i-parseInt(h,10)-S:i+c>v-p&&(u+=i+c-v+p),l.scrollLeft=n,l.scrollTop=u}function le(l,e,t){const i=t==="left"?"offsetLeft":"offsetTop";let s=0;for(;e.offsetParent&&(s+=e[i],e.offsetParent!==l);){if(e.offsetParent.contains(l)){s-=l[i];break}e=e.offsetParent}return s}function Ne(l,e){if(l&&document.contains(l)){let n=document.scrollingElement||document.documentElement;if(window.getComputedStyle(n).overflow==="hidden"){let h=Fe(l);for(let b of h)Le(b,l)}else{var t;let{left:h,top:b}=l.getBoundingClientRect();l==null||(t=l.scrollIntoView)===null||t===void 0||t.call(l,{block:"nearest"});let{left:T,top:m}=l.getBoundingClientRect();if(Math.abs(h-T)>1||Math.abs(b-m)>1){var i,s,c;e==null||(s=e.containingElement)===null||s===void 0||(i=s.scrollIntoView)===null||i===void 0||i.call(s,{block:"center",inline:"center"}),(c=l.scrollIntoView)===null||c===void 0||c.call(l,{block:"nearest"})}}}}const et="react-aria-clear-focus",tt="react-aria-focus";function lt(l){return ue()?l.metaKey:l.ctrlKey}let H="default",J="",j=new WeakMap;function Re(l){if(de()){if(H==="default"){const e=z(l);J=e.documentElement.style.webkitUserSelect,e.documentElement.style.webkitUserSelect="none"}H="disabled"}else if(l instanceof HTMLElement||l instanceof SVGElement){let e="userSelect"in l.style?"userSelect":"webkitUserSelect";j.set(l,l.style[e]),l.style[e]="none"}}function ie(l){if(de()){if(H!=="disabled")return;H="restoring",setTimeout(()=>{ge(()=>{if(H==="restoring"){const e=z(l);e.documentElement.style.webkitUserSelect==="none"&&(e.documentElement.style.webkitUserSelect=J||""),J="",H="default"}})},300)}else if((l instanceof HTMLElement||l instanceof SVGElement)&&l&&j.has(l)){let e=j.get(l),t="userSelect"in l.style?"userSelect":"webkitUserSelect";l.style[t]==="none"&&(l.style[t]=e),l.getAttribute("style")===""&&l.removeAttribute("style"),j.delete(l)}}function Be(l){let e=y.useContext(Me);if(e){let{register:t,...i}=e;l=he(i,l),t()}return Te(e,l.ref),l}var Y=new WeakMap;class X{continuePropagation(){N(this,Y,!1)}get shouldStopPropagation(){return xe(this,Y)}constructor(e,t,i,s){Ee(this,Y,{writable:!0,value:void 0}),N(this,Y,!0);var c;let n=(c=s==null?void 0:s.target)!==null&&c!==void 0?c:i.currentTarget;const u=n==null?void 0:n.getBoundingClientRect();let h,b=0,T,m=null;i.clientX!=null&&i.clientY!=null&&(T=i.clientX,m=i.clientY),u&&(T!=null&&m!=null?(h=T-u.left,b=m-u.top):(h=u.width/2,b=u.height/2)),this.type=e,this.pointerType=t,this.target=i.currentTarget,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.x=h,this.y=b}}const se=Symbol("linkClicked"),re="react-aria-pressable-style",ne="data-react-aria-pressable";function it(l){let{onPress:e,onPressChange:t,onPressStart:i,onPressEnd:s,onPressUp:c,onClick:n,isDisabled:u,isPressed:h,preventFocusOnPress:b,shouldCancelOnPointerExit:T,allowTextSelectionOnPress:m,ref:A,...w}=Be(l),[L,I]=y.useState(!1),d=y.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:v,removeAllGlobalListeners:S}=be(),p=D((r,f)=>{let P=d.current;if(u||P.didFirePressStart)return!1;let o=!0;if(P.isTriggeringEvent=!0,i){let g=new X("pressstart",f,r);i(g),o=g.shouldStopPropagation}return t&&t(!0),P.isTriggeringEvent=!1,P.didFirePressStart=!0,I(!0),o}),$=D((r,f,P=!0)=>{let o=d.current;if(!o.didFirePressStart)return!1;o.didFirePressStart=!1,o.isTriggeringEvent=!0;let g=!0;if(s){let a=new X("pressend",f,r);s(a),g=a.shouldStopPropagation}if(t&&t(!1),I(!1),e&&P&&!u){let a=new X("press",f,r);e(a),g&&(g=a.shouldStopPropagation)}return o.isTriggeringEvent=!1,g}),k=D((r,f)=>{let P=d.current;if(u)return!1;if(c){P.isTriggeringEvent=!0;let o=new X("pressup",f,r);return c(o),P.isTriggeringEvent=!1,o.shouldStopPropagation}return!0}),B=D(r=>{let f=d.current;if(f.isPressed&&f.target){f.didFirePressStart&&f.pointerType!=null&&$(O(f.target,r),f.pointerType,!1),f.isPressed=!1,f.isOverTarget=!1,f.activePointerId=null,f.pointerType=null,S(),m||ie(f.target);for(let P of f.disposables)P();f.disposables=[]}}),W=D(r=>{T&&B(r)}),C=D(r=>{n==null||n(r)}),Z=D((r,f)=>{if(n){let P=new MouseEvent("click",r);$e(P,f),n(me(P))}}),ye=y.useMemo(()=>{let r=d.current,f={onKeyDown(o){if(G(o.nativeEvent,o.currentTarget)&&F(o.currentTarget,E(o.nativeEvent))){var g;oe(E(o.nativeEvent),o.key)&&o.preventDefault();let a=!0;if(!r.isPressed&&!o.repeat){r.target=o.currentTarget,r.isPressed=!0,r.pointerType="keyboard",a=p(o,"keyboard");let K=o.currentTarget,x=R=>{G(R,K)&&!R.repeat&&F(K,E(R))&&r.target&&k(O(r.target,R),"keyboard")};v(z(o.currentTarget),"keyup",Ie(x,P),!0)}a&&o.stopPropagation(),o.metaKey&&ue()&&((g=r.metaKeyEvents)===null||g===void 0||g.set(o.key,o.nativeEvent))}else o.key==="Meta"&&(r.metaKeyEvents=new Map)},onClick(o){if(!(o&&!F(o.currentTarget,E(o.nativeEvent)))&&o&&o.button===0&&!r.isTriggeringEvent&&!ee.isOpening){let g=!0;if(u&&o.preventDefault(),!r.ignoreEmulatedMouseEvents&&!r.isPressed&&(r.pointerType==="virtual"||we(o.nativeEvent))){let a=p(o,"virtual"),K=k(o,"virtual"),x=$(o,"virtual");C(o),g=a&&K&&x}else if(r.isPressed&&r.pointerType!=="keyboard"){let a=r.pointerType||o.nativeEvent.pointerType||"virtual",K=k(O(o.currentTarget,o),a),x=$(O(o.currentTarget,o),a,!0);g=K&&x,r.isOverTarget=!1,C(o),B(o)}r.ignoreEmulatedMouseEvents=!1,g&&o.stopPropagation()}}},P=o=>{var g;if(r.isPressed&&r.target&&G(o,r.target)){var a;oe(E(o),o.key)&&o.preventDefault();let x=E(o),R=F(r.target,E(o));$(O(r.target,o),"keyboard",R),R&&Z(o,r.target),S(),o.key!=="Enter"&&V(r.target)&&F(r.target,x)&&!o[se]&&(o[se]=!0,ee(r.target,o,!1)),r.isPressed=!1,(a=r.metaKeyEvents)===null||a===void 0||a.delete(o.key)}else if(o.key==="Meta"&&(!((g=r.metaKeyEvents)===null||g===void 0)&&g.size)){var K;let x=r.metaKeyEvents;r.metaKeyEvents=void 0;for(let R of x.values())(K=r.target)===null||K===void 0||K.dispatchEvent(new KeyboardEvent("keyup",R))}};if(typeof PointerEvent<"u"){f.onPointerDown=a=>{if(a.button!==0||!F(a.currentTarget,E(a.nativeEvent)))return;if(Se(a.nativeEvent)){r.pointerType="virtual";return}r.pointerType=a.pointerType;let K=!0;if(!r.isPressed){r.isPressed=!0,r.isOverTarget=!0,r.activePointerId=a.pointerId,r.target=a.currentTarget,m||Re(r.target),K=p(a,r.pointerType);let x=E(a.nativeEvent);"releasePointerCapture"in x&&x.releasePointerCapture(a.pointerId),v(z(a.currentTarget),"pointerup",o,!1),v(z(a.currentTarget),"pointercancel",g,!1)}K&&a.stopPropagation()},f.onMouseDown=a=>{if(F(a.currentTarget,E(a.nativeEvent))&&a.button===0){if(b){let K=Ke(a.target);K&&r.disposables.push(K)}a.stopPropagation()}},f.onPointerUp=a=>{!F(a.currentTarget,E(a.nativeEvent))||r.pointerType==="virtual"||a.button===0&&!r.isPressed&&k(a,r.pointerType||a.pointerType)},f.onPointerEnter=a=>{a.pointerId===r.activePointerId&&r.target&&!r.isOverTarget&&r.pointerType!=null&&(r.isOverTarget=!0,p(O(r.target,a),r.pointerType))},f.onPointerLeave=a=>{a.pointerId===r.activePointerId&&r.target&&r.isOverTarget&&r.pointerType!=null&&(r.isOverTarget=!1,$(O(r.target,a),r.pointerType,!1),W(a))};let o=a=>{if(a.pointerId===r.activePointerId&&r.isPressed&&a.button===0&&r.target){if(F(r.target,E(a))&&r.pointerType!=null){let K=!1,x=setTimeout(()=>{r.isPressed&&r.target instanceof HTMLElement&&(K?B(a):(Pe(r.target),r.target.click()))},80);v(a.currentTarget,"click",()=>K=!0,!0),r.disposables.push(()=>clearTimeout(x))}else B(a);r.isOverTarget=!1}},g=a=>{B(a)};f.onDragStart=a=>{F(a.currentTarget,E(a.nativeEvent))&&B(a)}}return f},[v,u,b,S,m,B,W,$,p,k,C,Z]);return y.useEffect(()=>{if(!A)return;const r=z(A.current);if(!r||!r.head||r.getElementById(re))return;const f=r.createElement("style");f.id=re,f.textContent=`
@layer {
  [${ne}] {
    touch-action: pan-x pan-y pinch-zoom;
  }
}
    `.trim(),r.head.prepend(f)},[A]),y.useEffect(()=>{let r=d.current;return()=>{var f;m||ie((f=r.target)!==null&&f!==void 0?f:void 0);for(let P of r.disposables)P();r.disposables=[]}},[m]),{isPressed:h||L,pressProps:he(w,ye,{[ne]:!0})}}function V(l){return l.tagName==="A"&&l.hasAttribute("href")}function G(l,e){const{key:t,code:i}=l,s=e,c=s.getAttribute("role");return(t==="Enter"||t===" "||t==="Spacebar"||i==="Space")&&!(s instanceof te(s).HTMLInputElement&&!pe(s,t)||s instanceof te(s).HTMLTextAreaElement||s.isContentEditable)&&!((c==="link"||!c&&V(s))&&t!=="Enter")}function O(l,e){let t=e.clientX,i=e.clientY;return{currentTarget:l,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,clientX:t,clientY:i}}function De(l){return l instanceof HTMLInputElement?!1:l instanceof HTMLButtonElement?l.type!=="submit"&&l.type!=="reset":!V(l)}function oe(l,e){return l instanceof HTMLInputElement?!pe(l,e):De(l)}const Ue=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function pe(l,e){return l.type==="checkbox"||l.type==="radio"?e===" ":Ue.has(l.type)}function st(l){let e=He(z(l));e!==l&&(e&&Oe(e,l),l&&ze(l,e))}function Oe(l,e){l.dispatchEvent(new FocusEvent("blur",{relatedTarget:e})),l.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:e}))}function ze(l,e){l.dispatchEvent(new FocusEvent("focus",{relatedTarget:e})),l.dispatchEvent(new FocusEvent("focusin",{bubbles:!0,relatedTarget:e}))}function He(l){let e=ke(l),t=e==null?void 0:e.getAttribute("aria-activedescendant");return t&&l.getElementById(t)||e}class M extends Set{constructor(e,t,i){super(e),e instanceof M?(this.anchorKey=t??e.anchorKey,this.currentKey=i??e.currentKey):(this.anchorKey=t??null,this.currentKey=i??null)}}function We(l,e){if(l.size!==e.size)return!1;for(let t of l)if(!e.has(t))return!1;return!0}function rt(l){let{selectionMode:e="none",disallowEmptySelection:t=!1,allowDuplicateSelectionEvents:i,selectionBehavior:s="toggle",disabledBehavior:c="all"}=l,n=y.useRef(!1),[,u]=y.useState(!1),h=y.useRef(null),b=y.useRef(null),[,T]=y.useState(null),m=y.useMemo(()=>ae(l.selectedKeys),[l.selectedKeys]),A=y.useMemo(()=>ae(l.defaultSelectedKeys,new M),[l.defaultSelectedKeys]),[w,L]=Ae(m,A,l.onSelectionChange),I=y.useMemo(()=>l.disabledKeys?new Set(l.disabledKeys):new Set,[l.disabledKeys]),[d,v]=y.useState(s);s==="replace"&&d==="toggle"&&typeof w=="object"&&w.size===0&&v("replace");let S=y.useRef(s);return y.useEffect(()=>{s!==S.current&&(v(s),S.current=s)},[s]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:d,setSelectionBehavior:v,get isFocused(){return n.current},setFocused(p){n.current=p,u(p)},get focusedKey(){return h.current},get childFocusStrategy(){return b.current},setFocusedKey(p,$="first"){h.current=p,b.current=$,T(p)},selectedKeys:w,setSelectedKeys(p){(i||!We(p,w))&&L(p)},disabledKeys:I,disabledBehavior:c}}function ae(l,e){return l?l==="all"?"all":new M(l):e}class Ye{build(e,t){return this.context=t,ce(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:i}=e;if(U.isValidElement(t)&&t.type===U.Fragment)yield*this.iterateCollection({children:t.props.children,items:i});else if(typeof t=="function"){if(!i)throw new Error("props.children was a function but props.items is missing");let s=0;for(let c of i)yield*this.getFullNode({value:c,index:s},{renderer:t}),s++}else{let s=[];U.Children.forEach(t,n=>{n&&s.push(n)});let c=0;for(let n of s){let u=this.getFullNode({element:n,index:c},{});for(let h of u)c++,yield h}}}getKey(e,t,i,s){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${s}${t.key}`;let c=t.value;if(c!=null){var n;let u=(n=c.key)!==null&&n!==void 0?n:c.id;if(u==null)throw new Error("No key found for item");return u}return s?`${s}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,i,s){if(U.isValidElement(e.element)&&e.element.type===U.Fragment){let d=[];U.Children.forEach(e.element.props.children,S=>{d.push(S)});var c;let v=(c=e.index)!==null&&c!==void 0?c:0;for(const S of d)yield*this.getFullNode({element:S,index:v++},t,i,s);return}let n=e.element;if(!n&&e.value&&t&&t.renderer){let d=this.cache.get(e.value);if(d&&(!d.shouldInvalidate||!d.shouldInvalidate(this.context))){d.index=e.index,d.parentKey=s?s.key:null,yield d;return}n=t.renderer(e.value)}if(U.isValidElement(n)){let d=n.type;if(typeof d!="function"&&typeof d.getCollectionNode!="function"){let $=n.type;throw new Error(`Unknown element <${$}> in collection.`)}let v=d.getCollectionNode(n.props,this.context);var u;let S=(u=e.index)!==null&&u!==void 0?u:0,p=v.next();for(;!p.done&&p.value;){let $=p.value;e.index=S;var h;let k=(h=$.key)!==null&&h!==void 0?h:null;k==null&&(k=$.element?null:this.getKey(n,e,t,i));let W=[...this.getFullNode({...$,key:k,index:S,wrapper:Xe(e.wrapper,$.wrapper)},this.getChildState(t,$),i?`${i}${n.key}`:n.key,s)];for(let C of W){var b,T;C.value=(T=(b=$.value)!==null&&b!==void 0?b:e.value)!==null&&T!==void 0?T:null,C.value&&this.cache.set(C.value,C);var m;if(e.type&&C.type!==e.type)throw new Error(`Unsupported type <${q(C.type)}> in <${q((m=s==null?void 0:s.type)!==null&&m!==void 0?m:"unknown parent type")}>. Only <${q(e.type)}> is supported.`);S++,yield C}p=v.next(W)}return}if(e.key==null||e.type==null)return;let A=this;var w,L;let I={type:e.type,props:e.props,key:e.key,parentKey:s?s.key:null,value:(w=e.value)!==null&&w!==void 0?w:null,level:s?s.level+1:0,index:e.index,rendered:e.rendered,textValue:(L=e.textValue)!==null&&L!==void 0?L:"","aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes||!1,childNodes:ce(function*(){if(!e.hasChildNodes||!e.childNodes)return;let d=0;for(let v of e.childNodes()){v.key!=null&&(v.key=`${I.key}${v.key}`);let S=A.getFullNode({...v,index:d},A.getChildState(t,v),I.key,I);for(let p of S)d++,yield p}})};yield I}constructor(){this.cache=new WeakMap}}function ce(l){let e=[],t=null;return{*[Symbol.iterator](){for(let i of e)yield i;t||(t=l());for(let i of t)e.push(i),yield i}}}function Xe(l,e){if(l&&e)return t=>l(e(t));if(l)return l;if(e)return e}function q(l){return l[0].toUpperCase()+l.slice(1)}function nt(l,e,t){let i=y.useMemo(()=>new Ye,[]),{children:s,items:c,collection:n}=l;return y.useMemo(()=>{if(n)return n;let h=i.build({children:s,items:c},t);return e(h)},[i,s,c,n,t,e])}function je(l,e){return typeof e.getChildren=="function"?e.getChildren(l.key):l.childNodes}function Ge(l){return qe(l,0)}function qe(l,e){if(e<0)return;let t=0;for(let i of l){if(t===e)return i;t++}}function ot(l){let e;for(let t of l)e=t;return e}function Q(l,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let i=[...fe(l,e),e],s=[...fe(l,t),t],c=i.slice(0,s.length).findIndex((n,u)=>n!==s[u]);return c!==-1?(e=i[c],t=s[c],e.index-t.index):i.findIndex(n=>n===t)>=0?1:(s.findIndex(n=>n===e)>=0,-1)}function fe(l,e){let t=[],i=e;for(;(i==null?void 0:i.parentKey)!=null;)i=l.getItem(i.parentKey),i&&t.unshift(i);return t}class ve{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){if(this.state.selectionMode==="none")return!1;let t=this.getKey(e);return t==null?!1:this.state.selectedKeys==="all"?this.canSelectItem(t):this.state.selectedKeys.has(t)}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(i=>t.has(i)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let i of this.state.selectedKeys){let s=this.collection.getItem(i);(!e||s&&Q(this.collection,s,e)<0)&&(e=s)}var t;return(t=e==null?void 0:e.key)!==null&&t!==void 0?t:null}get lastSelectedKey(){let e=null;for(let i of this.state.selectedKeys){let s=this.collection.getItem(i);(!e||s&&Q(this.collection,s,e)>0)&&(e=s)}var t;return(t=e==null?void 0:e.key)!==null&&t!==void 0?t:null}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}let t=this.getKey(e);if(t==null)return;let i;if(this.state.selectedKeys==="all")i=new M([t],t,t);else{let n=this.state.selectedKeys;var s;let u=(s=n.anchorKey)!==null&&s!==void 0?s:t;i=new M(n,u,t);var c;for(let h of this.getKeyRange(u,(c=n.currentKey)!==null&&c!==void 0?c:t))i.delete(h);for(let h of this.getKeyRange(t,u))this.canSelectItem(h)&&i.add(h)}this.state.setSelectedKeys(i)}getKeyRange(e,t){let i=this.collection.getItem(e),s=this.collection.getItem(t);return i&&s?Q(this.collection,i,s)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){var i;if(!((i=this.layoutDelegate)===null||i===void 0)&&i.getKeyRange)return this.layoutDelegate.getKeyRange(e,t);let s=[],c=e;for(;c!=null;){let n=this.collection.getItem(c);if(n&&(n.type==="item"||n.type==="cell"&&this.allowsCellSelection)&&s.push(c),c===t)return s;c=this.collection.getKeyAfter(c)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t&&t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}let t=this.getKey(e);if(t==null)return;let i=new M(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);i.has(t)?i.delete(t):this.canSelectItem(t)&&(i.add(t),i.anchorKey=t,i.currentKey=t),!(this.disallowEmptySelection&&i.size===0)&&this.state.setSelectedKeys(i)}replaceSelection(e){if(this.selectionMode==="none")return;let t=this.getKey(e);if(t==null)return;let i=this.canSelectItem(t)?new M([t],t,t):new M;this.state.setSelectedKeys(i)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new M;for(let i of e){let s=this.getKey(i);if(s!=null&&(t.add(s),this.selectionMode==="single"))break}this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=i=>{for(;i!=null;){if(this.canSelectItem(i)){var s;let n=this.collection.getItem(i);(n==null?void 0:n.type)==="item"&&e.push(i);var c;n!=null&&n.hasChildNodes&&(this.allowsCellSelection||n.type!=="item")&&t((c=(s=Ge(je(n,this.collection)))===null||s===void 0?void 0:s.key)!==null&&c!==void 0?c:null)}i=this.collection.getKeyAfter(i)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new M)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;for(let i of t)if(!e.has(i))return!1;return!0}canSelectItem(e){var t;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let i=this.collection.getItem(e);return!(!i||!(i==null||(t=i.props)===null||t===void 0)&&t.isDisabled||i.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var t,i;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((i=this.collection.getItem(e))===null||i===void 0||(t=i.props)===null||t===void 0)&&t.isDisabled))}isLink(e){var t,i;return!!(!((i=this.collection.getItem(e))===null||i===void 0||(t=i.props)===null||t===void 0)&&t.href)}getItemProps(e){var t;return(t=this.collection.getItem(e))===null||t===void 0?void 0:t.props}withCollection(e){return new ve(e,this.state,{allowsCellSelection:this.allowsCellSelection,layoutDelegate:this.layoutDelegate||void 0})}constructor(e,t,i){this.collection=e,this.state=t;var s;this.allowsCellSelection=(s=i==null?void 0:i.allowsCellSelection)!==null&&s!==void 0?s:!1,this._isSelectAll=null,this.layoutDelegate=(i==null?void 0:i.layoutDelegate)||null}}export{it as $,je as a,ot as b,Ge as c,qe as d,Ne as e,rt as f,ve as g,nt as h,_e as i,tt as j,st as k,Ze as l,et as m,Le as n,lt as o};
