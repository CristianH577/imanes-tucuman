const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DrawerFilters-B1MiKL1k.js","assets/index-Bwyf3IQG.js","assets/index-C6vENm9z.css","assets/values-7WfQOyWL.js","assets/svgsFormas-CL7yu-Kx.js","assets/chunk-2GIFKCNQ-BglyJqua.js","assets/chunk-6MDMHKHV-BHDdzVmj.js","assets/useDialog-DnkZGHF0.js","assets/ArrowBack-DDdrB1Jn.js"])))=>i.map(i=>d[i]);
import{u as T,j as t,C as H,m as P,I as z,h as R,r as h,c as U,i as W,k as q,l as Z,f as B,n as $,g as G,s as K,o as Q,t as F,p as X,q as Y,v as V,_ as ee}from"./index-Bwyf3IQG.js";import{O as te,F as D}from"./values-7WfQOyWL.js";import{B as se}from"./ButtonAddCart-phYEz6lJ.js";import{P as ae}from"./PriceLabel-Npbd2GIB.js";import{I as ie}from"./InputSearch-dWbNkhjT.js";import"./svgsFormas-CL7yu-Kx.js";import"./ShoppingCart-BO2mzjkR.js";import"./chunk-6MDMHKHV-BHDdzVmj.js";import"./Button-DunLojTQ.js";import"./ButtonBase-CgCBrcPS.js";const ne={hidden:{opacity:0,scale:0},visible:{opacity:1,scale:1},hover:{scale:1.05}};function re({items:x=[],loading:g=!1,databaseImgs:n={}}){const m=T(),i=m.cart.value;return g?t.jsx("div",{className:"flex justify-center",children:t.jsx(H,{})}):x.length<1?t.jsx("div",{className:"flex justify-center",children:t.jsx("span",{className:"font-semibold text-xl",children:"Sin resultados"})}):t.jsx("section",{className:"w-full grid grid-cols-[repeat(auto-fit,_minmax(150px,_180px))] gap-4 lg:gap-6 justify-center",children:x.map(e=>{const j=n[e.id];let b=!1;if(j.haveSvg&&e.forma){const p=te[e.forma[0]];if(p&&p.icon&&(b=p.icon),e.forma[1]&&p.subs&&e.forma[1]in p.subs){const v=p.subs[e.forma[1]];v.icon&&(b=v.icon)}}return t.jsxs(P.div,{variants:ne,initial:"hidden",animate:"visible",whileHover:"hover",className:"bg-content1 rounded-lg shadow-md flex flex-col pb-2",children:[t.jsxs("a",{href:`#buscar/${e.id}`,title:e.label,className:"flex flex-col h-full",children:[t.jsx("div",{className:"h-[150px] shadow-small rounded-lg p-2 flex items-center justify-center",children:b?t.jsx(b,{className:"h-full w-full max-w-[150px]"}):t.jsx(z,{alt:`Imagen de ${e.label}`,className:"object-contain w-full h-full",classes:{wrapper:"h-full max-w-[150px]"},src:j.preview})}),t.jsxs("div",{className:"p-2 flex-1 flex flex-col justify-between",children:[t.jsxs("p",{children:[t.jsxs("span",{className:"text-second self-start text-neutral-400 capitalize line-clamp-1",children:[e.categorie[0]," ",e.categorie[1]?" > "+e.categorie[1]:""]}),t.jsx("b",{className:"line-clamp-2 text-start",children:e.label}),e!=null&&e.noStock?t.jsx("b",{className:"text-danger",children:"Sin Stock"}):null]}),t.jsx(ae,{itemData:e,className:"self-end place-self-end justify-self-end end-0 content-end place-content-end items-end justify-items-end end",classNames:{price:"font-semibold text-tert text-custom2-10 dark:text-custom1"}})]})]}),t.jsx(R,{variant:"middle",className:"mb-2 bg-neutral-500/50"}),t.jsx(se,{inCart:e.id in i,handleAdd:()=>{let p=1;e.id in i&&(p=0),m.cart.add(e.id,p)},className:"self-center"})]},e.id)})})}const le=t.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 256 256",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M230,184a6,6,0,0,1-12,0A90,90,0,0,0,64.36,120.36L38.55,146H88a6,6,0,0,1,0,12H24a6,6,0,0,1-6-6V88a6,6,0,0,1,12,0v49.58l25.89-25.72A102,102,0,0,1,230,184Z"})}),oe=t.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 256 256",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M238,88v64a6,6,0,0,1-6,6H168a6,6,0,0,1,0-12h49.45l-25.8-25.63A90,90,0,0,0,38,184a6,6,0,0,1-12,0,102,102,0,0,1,174.12-72.12L226,137.58V88a6,6,0,0,1,12,0Z"})});function ce({totalItems:x=0,itemsPerPage:g=10,currentPage:n=1,className:m="",classes:i={},setPage:e=()=>{},iconNext:j=">",iconPrev:b="<",iconLast:p=">>",iconFirst:v="<<",showJumps:S=!1,siblings:N=1,showElipsis:_=!1,iconElipsisInf:I="...",iconElipsisHoverInf:C=le,iconElipsisSup:L="...",iconElipsisHoverSup:k=oe,breakpoints:y}){const E={showElipsis:_,siblings:N,showJumps:S},[s,u]=h.useState(E),l=Math.ceil(x/g),a=n-s.siblings<1?1:n+s.siblings>l?l-s.siblings*2:n-s.siblings,r=n+s.siblings>l?l:n-s.siblings<1?1+s.siblings*2:n+s.siblings,o="select-none flex flex-wrap items-center justify-center shadow-md min-w-9 w-9 h-9 text-small rounded-md"+(i.li?" "+i.li:""),c={wrapper:"pagination-custom p-2"+(m?" "+m:""),list:"flex flex-wrap gap-1 justify-center"+(i.list?" "+i.list:""),prev:o+(i.prev?" "+i.prev:""),first:o+" data-[hidden=true]:hidden"+(i.first?" "+i.first:""),item:o+" max-[230px]:data-[active=false]:hidden data-[active=false]:data-[hidden=true]:hidden"+(i.item?" "+i.item:""),last:o+" data-[hidden=true]:hidden "+(i.last?" "+i.last:""),next:o+(i.next?" "+i.next:""),elipsisInf:o+" data-[hidden=true]:hidden group"+(i.elipsisInf?" "+i.elipsisInf:""),elipsisSup:o+" data-[hidden=true]:hidden group"+(i.elipsisSup?" "+i.elipsisSup:"")},w={prev:()=>e(n-1),first:()=>e(1),last:()=>e(l),next:()=>e(n+1),elipsisInf:()=>{let d=n-s.siblings*2;d<1&&(d=1),s.siblings===0&&(d=n-1),e(d)},elipsisSup:()=>{var d=n+s.siblings*2;d>l&&(d=l),s.siblings===0&&(d=n+1),e(d)}};return h.useEffect(()=>{if(y){const d=()=>{const A=window.innerWidth,f=structuredClone(E);Object.entries(y).forEach(([J,M])=>{Number(J)<=A&&Object.assign(f,M)}),u(f)};return d(),window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}}},[]),t.jsx("nav",{"data-slot":"wrapper",role:"navigation","aria-label":"pagination navigation",className:c.wrapper,children:t.jsxs("ul",{"data-slot":"list",className:c.list,children:[t.jsx("li",{"data-slot":"prev",role:"button","aria-label":"previous page button",title:"Página anterior",className:c.prev,"data-disabled":n<=1,onClick:w.prev,children:b}),t.jsx("li",{"data-slot":"first",role:"button","aria-label":"first page button",title:"Primera página","data-hidden":s.showJumps?a<=1:!0,className:c.first,onClick:w.first,children:v}),t.jsxs("li",{"data-slot":"elipsisInf",role:"button","aria-label":"elipsis inferior button",title:"Saltar "+s.siblings*2+" páginas atrás","data-hidden":s.showElipsis?a<=1:!0,className:c.elipsisInf,onClick:w.elipsisInf,children:[t.jsx("span",{className:"group-hover:hidden",children:I}),t.jsx("span",{className:"hidden group-hover:block",children:C})]}),[...Array(l)].map((d,A)=>{const f=A+1;return t.jsx("li",{"data-slot":"item",role:"button","aria-label":"pagination item "+f,title:"Página "+f,"data-active":n===f,"data-hidden":f<a||f>r,className:c.item,onClick:()=>e(f),children:f},f)}),t.jsxs("li",{"data-slot":"elipsisSup",role:"button","aria-label":"elipsis superior button",title:"Saltar "+s.siblings*2+" páginas adelante","data-hidden":s.showElipsis?r===l:!0,className:c.elipsisSup,onClick:w.elipsisSup,children:[t.jsx("span",{className:"group-hover:hidden",children:L}),t.jsx("span",{className:"hidden group-hover:block",children:k})]}),t.jsx("li",{"data-slot":"last",role:"button","aria-label":"last page button",title:"Última página","data-hidden":s.showJumps?r>=l:!0,className:c.last,onClick:w.last,children:p}),t.jsx("li",{"data-slot":"next",role:"button","aria-label":"next page button",title:"Página siguiente","data-disabled":n>=l,className:c.next,onClick:w.next,children:j})]})})}const de=U(t.jsx("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"})),pe=h.lazy(()=>ee(()=>import("./DrawerFilters-B1MiKL1k.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),O=16;function Ne(){const{search:x}=W(),g=q(),n=T(),[m,i]=h.useState([]),[e,j]=h.useState(D),[b,p]=h.useState([]),[v,S]=h.useState(!0),[N,_]=h.useState(""),[I,C]=h.useState(!1),L=async()=>{K(),S(!0);let s=[];if(s=Q.filter(a=>!(a!=null&&a.hidden)),s=JSON.parse(JSON.stringify(s)),e.categorie.length>0&&e.categorie.forEach((a,r)=>{s=s.filter(o=>a.includes("other")&&!o.categorie[r]?!0:o.categorie.includes(a))}),e.forma.length>0&&e.forma.forEach(a=>{s=s.filter(r=>{var o;return(o=r.forma)==null?void 0:o.includes(a)})}),e!=null&&e.priceMin){const a=Number(e==null?void 0:e.priceMin);s=s.filter(r=>{const o=r.price_data.usePrice,c=r.price_data.prices[o];return Number(c)>=a})}if(e!=null&&e.priceMax){const a=Number(e==null?void 0:e.priceMax);s=s.filter(r=>{const o=r.price_data.usePrice,c=r.price_data.prices[o];return Number(c)<=a})}if(e!=null&&e.text){const a=F(e.text);s=s.filter(r=>{if(F(JSON.stringify(r)).includes(a))return r})}if(e!=null&&e.orderBy){const[a,r]=e.orderBy.split("-");s.sort(X(a,r))}const u=s.slice(O*(e.page-1),O*e.page),l=await Y(u,n.db.value);n.db.set(l),i(s),p(u),S(!1)},k=()=>{let s="?orderBy=price-asc";N&&(s+="&text="+N),g(s)},y=()=>_(""),E=s=>{let u=V(e);u?u+="&":u+="?",u+="page="+s,g(u)};return h.useEffect(()=>{const s=structuredClone(D);if(x){const u=new URLSearchParams(x),l={};Array.from(u.entries()).map(([a,r])=>l[a]=r.replace(/%/g," ")),Object.keys(l).forEach(a=>{if(s.hasOwnProperty(a)){switch(a){case"page":s[a]=Number(l[a]);break;case"forma":case"categorie":s[a]=l[a].split(",");break;default:s[a]=l[a];break}s.apply=!0}})}_(s==null?void 0:s.text),j(s)},[x]),h.useEffect(()=>{L()},[e]),t.jsxs(t.Fragment,{children:[t.jsxs("section",{className:"flex flex-col items-center gap-2 pt-8",children:[t.jsxs("article",{className:"flex flex-col gap-2 items-center xs:flex-row",children:[t.jsx(ie,{value:N,setValue:_,handleSearch:k,onClear:()=>g("?orderBy=price-asc")}),t.jsxs(Z,{children:[t.jsx(B,{isIconOnly:!0,as:"a",title:"Limpiar filtros",href:"#buscar?orderBy=price-asc",onPress:y,children:t.jsx($,{className:"h-6 w-fit"})}),t.jsx(B,{isIconOnly:!0,color:e!=null&&e.apply?"warning":"default",title:"Abrir lista de filtros",onPress:()=>C(!0),children:t.jsx(de,{className:"h-6 w-fit"})})]})]}),t.jsxs("article",{className:"text-center text-neutral-400",children:[t.jsxs("span",{children:["Total: ",m.length]}),t.jsx("br",{}),t.jsx("span",{className:"text-second",children:"Los precios pueden variar."})]})]}),t.jsx(re,{items:b,loading:v,databaseImgs:n.db.value}),m.length>O&&t.jsx(ce,{totalItems:m.length,currentPage:e.page,itemsPerPage:O,setPage:E,showJumps:!0,siblings:1,className:"mt-4",classes:{li:"bg-custom1-3 text-custom2 font-semibold data-[disabled=true]:text-neutral-500 data-[disabled=true]:bg-neutral-300/60 data-[active=true]:bg-custom2-10 data-[active=true]:text-custom1-3 hover:bg-custom2-10 hover:text-custom1-3"},breakpoints:{240:{showElipsis:!0},320:{showJumps:!0},400:{siblings:1},500:{siblings:2},600:{siblings:3},700:{siblings:4},800:{siblings:5}}}),I&&t.jsx(G,{classFall:"absolute w-screen min-h-screen top-0 bg-black/50 z-30",children:t.jsx(pe,{isOpen:I,setIsOpen:C,filtersValues:e})})]})}export{Ne as default};
